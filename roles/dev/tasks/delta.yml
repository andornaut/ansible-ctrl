---
- name: Create a temporary directory
  tempfile:
    state: directory
  register: tmp_delta

- name: Get the latest version of Delta
  uri:
    url: https://api.github.com/repos/dandavison/delta/releases/latest
    return_content: yes
  register: delta_version

- name: Download Delta package
  get_url:
    url: "https://github.com/dandavison/delta/releases/download/{{ delta_version.json.name }}/git-delta_{{ delta_version.json.name }}_amd64.deb"
    dest: "{{ tmp_delta.path }}/delta.deb"

- name: Install Delta package
  apt:
    deb: "{{ tmp_delta.path }}/delta.deb"
  become: true
