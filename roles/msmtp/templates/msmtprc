# Workaround: https://github.com/marlam/msmtp-mirror/issues/10
# See /usr/bin/sendmail implementation of: https://serverfault.com/a/441414
# TODO alternatively switch to vixie cron
# https://serverfault.com/a/437319
account default

host {{ msmtp_host }}
port {{ msmtp_port }}
domain {{ msmtp_domain }}

auth on
user {{ msmtp_user }}
password {{ msmtp_password_INSECURE }}

tls on
tls_trust_file /etc/ssl/certs/ca-certificates.crt

syslog LOG_MAIL

# https://marlam.de/msmtp/msmtp.html#Commands-specific-to-sendmail-mode
# TODO switch to the following after upgrading to 1.8.7:
#from %U@{{ msmtp_domain }}
from admin@{{ msmtp_domain }}
# Replace local recipients with addresses in the aliases file
aliases /etc/aliases

# Deprecated in 1.8.7
auto_from on
maildomain {{ msmtp_domain }}
